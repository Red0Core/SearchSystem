{
  "settings": {
    "index": {
      "max_ngram_diff": 8
    },
    "number_of_shards": 1,
    "number_of_replicas": 0,
    "analysis": {
      "filter": {
        "russian_stop": { "type": "stop", "stopwords": "_russian_" },
        "russian_stemmer": { "type": "stemmer", "language": "russian" },
        "english_stop": { "type": "stop", "stopwords": "_english_" },
        "english_stemmer": { "type": "stemmer", "language": "english" },
        "phonetic_russian": { "type": "phonetic", "encoder": "beider_morse", "languages": ["russian", "english"] },
        "edge_ngram_filter": { "type": "edge_ngram", "min_gram": 2, "max_gram": 10 },
        "code_ngram": { "type": "ngram", "min_gram": 3, "max_gram": 8 },
        "alphanumeric": { "type": "word_delimiter", "generate_number_parts": true, "catenate_numbers": true },
        "brand_synonyms": {
          "type": "synonym",
          "synonyms": [
            "мерс,мерседес,мерсик,mercedes,mercedes-benz => mercedes-benz",
            "бэха,бмв,bmw => bmw",
            "тойота,toyota,таиота,тоиота,тоёта,таёта => toyota",
            "кэт,кет,котерепилор,котерпилор,котерьпилор,катерпилер,катерпиллар,caterpilar,caterpillar => caterpillar"
          ]
        }
      },
      "analyzer": {
        "title_analyzer": {
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "asciifolding",
            "russian_stop",
            "english_stop",
            "russian_stemmer",
            "english_stemmer",
            "brand_synonyms"
          ]
        },
        "manufacturer_analyzer": {
          "tokenizer": "standard",
          "filter": ["lowercase", "asciifolding", "brand_synonyms"]
        },
        "code_analyzer": {
          "tokenizer": "standard",
          "filter": ["lowercase", "alphanumeric"]
        },
        "numeric_analyzer": {
          "tokenizer": "standard",
          "filter": ["lowercase", "alphanumeric", "code_ngram"]
        },
        "phonetic_analyzer": {
          "tokenizer": "standard",
          "filter": ["lowercase", "asciifolding", "phonetic_russian"]
        },
        "autocomplete": {
          "tokenizer": "standard",
          "filter": ["lowercase", "asciifolding", "edge_ngram_filter"]
        },
        "russian": {
          "tokenizer": "standard",
          "filter": ["lowercase", "russian_stop", "russian_stemmer"]
        },
        "english": {
          "tokenizer": "standard",
          "filter": ["lowercase", "english_stop", "english_stemmer"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "manufacturer": {
        "type": "text",
        "analyzer": "manufacturer_analyzer",
        "fields": {
          "phonetic": { "type": "text", "analyzer": "phonetic_analyzer" },
          "autocomplete": { "type": "text", "analyzer": "autocomplete" }
        }
      },
      "productCode": {
        "type": "text",
        "analyzer": "code_analyzer",
        "fields": {
          "numeric": { "type": "text", "analyzer": "numeric_analyzer" }
        }
      },
      "title": {
        "type": "text",
        "analyzer": "title_analyzer",
        "fields": {
          "russian": { "type": "text", "analyzer": "russian" },
          "english": { "type": "text", "analyzer": "english" },
          "phonetic": { "type": "text", "analyzer": "phonetic_analyzer" },
          "autocomplete": { "type": "text", "analyzer": "autocomplete" }
        }
      },
      "titleTranslit": {
        "type": "text",
        "analyzer": "title_analyzer",
        "fields": {
          "phonetic": { "type": "text", "analyzer": "phonetic_analyzer" },
          "autocomplete": { "type": "text", "analyzer": "autocomplete" }
        }
      },
      "titlePhonetic": { "type": "text" },
      "phonetic": { "type": "text" },
      "externalId": { "type": "keyword" },
      "price": { "type": "float" },
      "category": { "type": "keyword" },
      "currency": { "type": "keyword" }
    }
  }
}
